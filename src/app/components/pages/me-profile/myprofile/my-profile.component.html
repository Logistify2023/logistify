<!-- View data user -->
<main class="main-content">
  <section class="container-fluid profile">
    <div class="row" *ngIf="!submittedForm">
      <div class="col-12 mb-3">
        <h2>{{ userInfo?.username }}</h2>
      </div>
      <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-10 perfil-user text-center info">
          <img [src]="image" alt="Foto de perfil" class="w-60 img-fluid mb-3" />
        </div>
        <div class="row">
          <div class="col-lg-6 col-md-6 col-sm-12">
            <div class="row">
              <div class="col-lg-6 col-md-6 col-sm-12">
                <label for="changeAvatar" class="col-12 mat-focus-indicator mat-stroked-button mat-button-base mt-1"> Cambiar avatar </label>
                <input type="file" id="changeAvatar" (change)="changeImage($event)" accept=".png, .jpg" style="opacity: 0;" >
              </div>
              <div class="col-lg-6 col-md-6 col-sm-12 mt-1 mb-1">
                <span class="text-center" *ngIf="fileData"> {{ fileData.name }} </span>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-sm-12">
            <button class="mt-1 mb-1 text-center col-12 mat-stroked-button mat-button-base" (click)="updateAvatar(userInfo.id)" mat-raised-button color="primary" [disabled]="!uploadFile">
              <i class="bi bi-pencil-square"></i> Cambiar avatar
            </button>
          </div>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-lg-11 col-md-11 col-sm-12 perfil-datosContacto">
          <h3 class="title text-center">Datos de contacto</h3>
          <div class="row">
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong> {{ userInfo?.name }} {{ userInfo?.lastname }} {{ userInfo?.surname }} </strong>
              <label> Nombre completo </label>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong> {{ userInfo?.email }} </strong>
              <label> Correo electrónico </label>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong> {{ userInfo?.phone }} </strong>
              <label> Teléfono </label>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong> {{ (userInfo.stall) ? userInfo?.stall.stall : "..." }} </strong>
              <label> Puesto </label>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong> {{ (userInfo.account) ? userInfo?.account.birth_date : "..." }} </strong>
              <label> Fecha de nacimiento </label>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong> {{ (userInfo.account) ? userInfo?.account.home_phone : "..." }} </strong>
              <label> Otro teléfono </label>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong> {{ (userInfo.account) ? userInfo?.account.sex : "..." }} </strong>
              <label> Género </label>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong> {{ (userInfo.account) ? userInfo?.account.description : "..." }} </strong>
              <label> Descripción </label>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong> {{ userInfo.status }} </strong>
              <label> Estado </label>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong> {{ userInfo.created_at }} </strong>
              <label> Antiguedad </label>
            </div>
          </div>
          <button class="mt-3 mb-3 text-center" (click)="openModalUpdate(userInfo.id)" mat-raised-button color="primary">
            <i class="bi bi-pencil-square"></i> Actualizar perfil
          </button>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-lg-10 col-md-10 col-sm-12 perfil-tipo-cuenta">
          <h3 class="title text-center">Tipo de cuenta</h3>
          <div class="row">
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong *ngFor="let r of userInfo?.roles"> {{ r.rol }} </strong>
              <small *ngIf="!userInfo?.roles">Sin rol.</small>
              <label> Rol </label>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 info">
              <strong *ngFor="let a of userInfo?.areas"> {{ a.area }} </strong>
              <small *ngIf="!userInfo?.areas || userInfo?.areas.length == 0">Sin area.</small>
              <label> Área </label>
            </div>
          </div>
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-lg-10 col-md-10 col-sm-12 perfil-tipo-cuenta">
          <h3 *ngIf="userInfo?.customers && userInfo?.customers.length > 0" class="title text-center mt-3">Clientes asignados</h3>
          <div *ngIf="userInfo?.customers && userInfo?.customers.length > 0" class="row">
            <div class="col-12 mt-1 info">
              <ul class="etiquetas">
                <li *ngFor="let c of userInfo?.customers"> {{ c.business_name }} </li>
              </ul>
              <small *ngIf="!userInfo?.customers || userInfo?.customers.length == 0"> No tienes clientes asignados. </small>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="loading text-center" *ngIf="submittedForm">
      <img width="45%" height="45%" src="assets/img/loader.svg">
    </div>
  </section>
</main>